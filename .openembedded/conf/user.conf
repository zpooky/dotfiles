EXTRA_IMAGE_FEATURES:append = " debug-tweaks"
IMAGE_INSTALL:append = " tree"
IMAGE_INSTALL:append = " systemd-analyze"
IMAGE_INSTALL:append = " strace"
IMAGE_INSTALL:append = " atop htop"
IMAGE_INSTALL:append = " time"
IMAGE_INSTALL:append = " less"
IMAGE_INSTALL:append = " alsa-utils"
IMAGE_INSTALL:append = " binutils"
IMAGE_INSTALL:append = " coreutils"
IMAGE_INSTALL:append = " gdbserver"
IMAGE_INSTALL:append = " gdb"
IMAGE_INSTALL:append = " netcat"
IMAGE_INSTALL:append = " inotify-tools"

IMAGE_INSTALL:append = " i2c-tools"
IMAGE_INSTALL:append = " ethtool"
IMAGE_INSTALL:append = " fbset"
IMAGE_INSTALL:append = " memtester"

# IMAGE_INSTALL:append = " tmux"
IMAGE_INSTALL:append = " screen"
# IMAGE_INSTALL:append = " glibc-utils localedef"

# ss?
IMAGE_INSTALL:append = " iproute2"
# ?? iproute2-ss
# ktrace
IMAGE_INSTALL:append = " trace-cmd"
#
# INCOMPATIBLE_LICENSE_pn-binutils = ""
# IMAGE_INSTALL:append = " binutils"

# IMAGE_INSTALL:append = " perf"
# kill pidof ps watch
IMAGE_INSTALL:append = " procps"
EXTRA_IMAGE_FEATURES:append = " tools-debug"

IMAGE_INSTALL:append = " nmap"

IMAGE_INSTALL:append = " bbshell"

IMAGE_INSTALL:append = " tcpdump"

INCOMPATIBLE_LICENSE_EXCEPTIONS = "readline:GPL-3.0 perf:GPL-3.0 libbfd:GPL-3.0-only libopcodes:GPL-3.0-only screen:GPL-3.0-or-later"
INCOMPATIBLE_LICENSE_EXCEPTIONS += " time:GPL-3.0 time:GPL-3.0-only"
INCOMPATIBLE_LICENSE_EXCEPTIONS += " gdbserver:GPL-3.0 gdbserver:GPL-3.0-only gdbserver:LGPL-3.0-only"
INCOMPATIBLE_LICENSE_EXCEPTIONS += " gdb:GPL-3.0 gdb:GPL-3.0-only gdb-py:GPL-3.0-only gdb:LGPL-3.0-only"
INCOMPATIBLE_LICENSE_EXCEPTIONS += " binutils:GPL-3.0 binutils:GPL-3.0-only"
INCOMPATIBLE_LICENSE_EXCEPTIONS += " coreutils:GPL-3.0-or-later coreutils-stdbuf:GPL-3.0-or-later"
# WHITELIST_GPL-3.0 += ""
# WHITELIST_GPL-3.0-only += ""
# WHITELIST_GPL-3.0-or-later += ""

# /sys/kernel/debug/ ??
PACKAGECONFIG_pn-${PREFERRED_PROVIDER_virtual/kernel}:append = " axis-developer"

# allows erasing bootblock parameters
PACKAGECONFIG:append_pn-bootblocktool = " axis-developer"

# /meta-axis/recipes-system/busybox/busybox/axis-developer.cfg
PACKAGECONFIG:append_pn-busybox = " axis-developer"

# ERROR
# | wrapper: failed with: gRPC call failed: failed to connect to all addresses
# EXTERNALSRC_EXTENSIONS:append = " externalsrc-compile-commands"

IMAGE_INSTALL:append = " libasan"
# IMAGE_INSTALL:append = " liblsan libtsan"

# I guess this will populate oe-workdir/image/... with unstripped executables...
# PACKAGE_STRIP = "no"

# I guess this only work for bitbake axis-image-cvp
# INHIBIT_SYSROOT_STRIP_pn-monolith = "1"
# DEBUG_BUILD_pn-monolith = "1"
# DEBUG_OPTIMIZATION:append_pn-monolith = " -Og "
# CFLAGS:append_pn-monolith = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-monolith = " gcc-sanitizers "
# LDFLAGS:append_pn-monolith = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "


# INHIBIT_SYSROOT_STRIP_pn-eventbridged = "1"
# DEBUG_BUILD_pn-eventbridged = "1"
# DEBUG_OPTIMIZATION:append_pn-eventbridged = " -Og "
# CFLAGS:append_pn-eventbridged = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-eventbridged = " gcc-sanitizers "
# LDFLAGS:append_pn-eventbridged = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
#
# INHIBIT_SYSROOT_STRIP_pn-eventbridge-plugins-propertychanged = "1"
# DEBUG_BUILD_pn-eventbridge-plugins-propertychanged = "1"
# DEBUG_OPTIMIZATION:append_pn-eventbridge-plugins-propertychanged = " -Og "
# CFLAGS:append_pn-eventbridge-plugins-propertychanged = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-eventbridge-plugins-propertychanged = " gcc-sanitizers "
# LDFLAGS:append_pn-eventbridge-plugins-propertychanged = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
#
# INHIBIT_SYSROOT_STRIP_pn-libconfiguration-event = "1"
# DEBUG_BUILD_pn-libconfiguration-event = "1"
# DEBUG_OPTIMIZATION:append_pn-libconfiguration-event = " -Og "
# CFLAGS:append_pn-libconfiguration-event = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-libconfiguration-event = " gcc-sanitizers "
# LDFLAGS:append_pn-libconfiguration-event = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
#
# INHIBIT_SYSROOT_STRIP_pn-glib-2.0 = "1"
# DEBUG_BUILD_pn-glib-2.0 = "1"
# DEBUG_OPTIMIZATION:append_pn-glib-2.0 = " -Og "
# CFLAGS:append_pn-glib-2.0 = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-glib-2.0 = " gcc-sanitizers "
# LDFLAGS:append_pn-glib-2.0 = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
#
# INHIBIT_SYSROOT_STRIP_pn-glib-utils = "1"
# DEBUG_BUILD_pn-glib-utils = "1"
# DEBUG_OPTIMIZATION:append_pn-glib-utils = " -Og "
# CFLAGS:append_pn-glib-utils = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-glib-utils = " gcc-sanitizers "
# LDFLAGS:append_pn-glib-utils = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
#
# INHIBIT_SYSROOT_STRIP_pn-libevent2 = "1"
# DEBUG_BUILD_pn-libevent2 = "1"
# DEBUG_OPTIMIZATION:append_pn-libevent2 = " -Og "
# CFLAGS:append_pn-libevent2 = " -fsanitize=address -U_FORTIFY_SOURCE  -fno-omit-frame-pointer "
# DEPENDS:append_pn-libevent2 = " gcc-sanitizers "
# LDFLAGS:append_pn-libevent2 = " -fno-omit-frame-pointer -fsanitize=address -static-libasan "
